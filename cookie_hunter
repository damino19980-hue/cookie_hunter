from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

def _init_driver(self):
    caps = DesiredCapabilities.CHROME
    caps['pageLoadStrategy'] = 'eager'  # لا ينتظر تحميل الصفحة بالكامل
    
    options = Options()
    options.add_argument("--headless")
    options.add_argument("--disable-gpu")
    options.add_argument("--no-sandbox")
    options.add_argument("--disable-dev-shm-usage")
    
    service = Service(executable_path=ChromeDriverManager().install())
    driver = webdriver.Chrome(service=service, options=options, desired_capabilities=caps)
    driver.set_page_load_timeout(60)  # 60 ثانية بدلاً من 120
    return driver
